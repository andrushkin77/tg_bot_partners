<!DOCTYPE html>
<html lang="ru">
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
    <title>Личный кабинет</title>
</head>
<body>
    <h2>Ваши заказы</h2>
    <div id="orders"></div>

    <script>
        fetch('/orders?tgUserId=' + Telegram.WebApp.initDataUnsafe.user.id)
            .then(res => res.json())
            .then(orders => {
                const container = document.getElementById("orders");
                orders.forEach(order => {
                    const orderBlock = document.createElement('div');
                    orderBlock.innerHTML = `
                        <h3>Заказ #${order.id}</h3>
                        <p>${order.description}</p>
                        <p>Комментарий: ${order.comment}</p>
                        <button onclick="openOrder(${order.id})">Откликнуться</button>
                    `;
                    container.appendChild(orderBlock);
                });
            });

        function openOrder(orderId) {
            Telegram.WebApp.openLink("order_details.html?orderId=" + orderId);
        }
    </script>
</body>
</html>
