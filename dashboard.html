<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8">
<title>Заказы</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
 body{background:#161616;color:#fff;font-family:Arial;padding:20px}
 #back{background:none;border:none;color:#32CD32;font-size:18px;
       text-decoration:underline;cursor:pointer;margin-bottom:10px}
 h2{margin-bottom:15px}
 .tabs button{padding:10px;margin-right:5px;border:none;border-radius:5px;
              cursor:pointer;background:#333;color:#fff}
 .tabs .active{background:#32CD32}
 .order{border:1px solid #444;padding:10px;margin:10px 0;border-radius:6px}
</style></head><body>
<button id="back">← Назад</button>
<h2>Заказы</h2>
<div class="tabs">
  <button id="tb-pending"     onclick="load('pending')">Поступающие</button>
  <button id="tb-review"      onclick="load('review')">На рассмотрении</button>
  <button id="tb-in_progress" onclick="load('in_progress')">В исполнении</button>
</div>
<div id="list">Загрузка…</div>

<script>
const api='https://YOUR_API_DOMAIN/api';
const pid=localStorage.getItem('partner_id');
Telegram.WebApp.expand();
back.onclick=()=>location.href='cabinet.html';

function mark(tab){
  ['tb-pending','tb-review','tb-in_progress']
    .forEach(id=>document.getElementById(id).classList.remove('active'));
  document.getElementById('tb-'+tab).classList.add('active');
}

function load(status='pending'){
  mark(status);
  fetch(`${api}/orders?status=${status}`)
    .then(r=>r.json()).then(d=>{
      const box=list; box.innerHTML='';
      if(d.orders.length===0){box.textContent='Пока нет заказов';return;}
      d.orders.forEach(o=>{
        const c=document.createElement('div');c.className='order';
        c.innerHTML=`
          <strong>#${o.id}</strong><br>
          ${o.description}<br>
          <button onclick="view(${o.id})">Детали</button>`;
        box.appendChild(c);
      });
    });
}
function view(id){
  location.href=`order_detail_partner.html?order_id=${id}&partner_id=${pid}`;
}
load();
</script></body></html>
